<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hello</title>
</head>
<body>
<div>hello, ajax下线请求下线测试</div>

<!--<form id="submitForm">
    <input name="username" type="text" />
</form>-->

<div id="request_div" style="margin-top: 30px;">
    <button onclick="ajaxOfflineRequest()">ajax请求-请求已下线</button>
    <button onclick="ajaxOnlineRequest()">ajax请求-请求未下线</button>
</div>
</body>

<script src="/js/jquery-3.6.0.min.js"></script>
<script>

    // form序列化为json
    /*$.fn.serializeObject = function()
    {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function() {
            if (o[this.name] !== undefined) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
    };

    $(function (){

    });*/

    function ajaxOfflineRequest() {
        ajaxDo("/aoffline/retJson")
    }

    function ajaxOnlineRequest() {
        ajaxDo("/aonline/retJson");
    }

    function ajaxDo(url) {
        // var formdata = $("#submitForm").serializeObject();
        $.ajax({
            url: url,
            type: 'POST',
            dataType: "json",
            // data: JSON.stringify(formdata),
            processData: false, // tell jQuery not to process the data
            // contentType: false, // tell jQuery not to set contentType
            contentType: 'application/json', // tell jQuery not to set contentType
            success:function (data) {
                console.info(data);
            }
        });
    }
</script>
</html>